import{u as C,r,j as e,B as D,T as g,C as P}from"./index-EQlX5qql.js";import{T as b,B as T,a as k}from"./axios-B3PfkH_3.js";import{C as I,D as L,A as W,k as w}from"./index-CRhFVGpA.js";const R=({setIsAuthenticated:y})=>{const j=C(),[t,v]=r.useState({email:"",password:""}),[o,c]=r.useState(!1),[u,m]=r.useState(""),[p,l]=r.useState(""),[h,d]=r.useState(""),S=()=>{let a=!0;return l(""),d(""),t.email?/\S+@\S+\.\S+/.test(t.email)||(l("Invalid email format"),a=!1):(l("Email is required"),a=!1),t.password?t.password.length<5&&(d("Password must be at least 5 characters"),a=!1):(d("Password is required"),a=!1),a},E=async a=>{var i,n;if(a.preventDefault(),m(""),!!S())try{c(!0);const s=await k.post("http://44.196.64.110:5050/api/admin/login",t);localStorage.setItem("token",s.data.token),y(!0),w.success("✅ Login Successful!"),j("/")}catch(s){const f=((n=(i=s.response)==null?void 0:i.data)==null?void 0:n.message)||"❌ Login failed. Please try again.";m(f),w.error(f)}finally{c(!1)}},x=a=>{const{name:i,value:n}=a.target;v(s=>({...s,[i]:n}))};return e.jsxs(I,{maxWidth:!1,disableGutters:!0,sx:{width:"100%",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",bgcolor:"#cfe8fc"},children:[e.jsx(L,{position:"top-right",toastOptions:{style:{marginTop:"20px",padding:"2px",borderRadius:"4px"},duration:2e3}}),e.jsxs(D,{component:"form",onSubmit:E,sx:{display:"flex",flexDirection:"column",gap:2,width:"100%",maxWidth:400,bgcolor:"white",p:4,borderRadius:2,boxShadow:3},children:[e.jsx(g,{variant:"h4",align:"center",sx:{mb:2},children:"Admin Login"}),u&&e.jsx(W,{severity:"error",sx:{width:"100%"},children:u}),e.jsx(b,{fullWidth:!0,label:"Email",name:"email",variant:"outlined",type:"email",value:t.email,onChange:x,error:!!p,helperText:p,disabled:o}),e.jsx(b,{fullWidth:!0,label:"Password",name:"password",variant:"outlined",type:"password",value:t.password,onChange:x,error:!!h,helperText:h,disabled:o}),e.jsx(T,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:2,backgroundColor:"yellow",color:"black",font:"bold"},disabled:o,children:o?e.jsx(P,{size:24,color:"inherit"}):"Sign In"}),e.jsx(g,{align:"center",sx:{mt:2},children:e.jsx("a",{href:"/forgot-password",style:{textDecoration:"none",color:"blue"},children:"Forgot Password?"})})]})]})};export{R as default};
