import{u as C,r as t,j as e,B as S,T as g,C as W}from"./index-EQlX5qql.js";import{T as m,B as D,a as E}from"./axios-B3PfkH_3.js";import{C as T,D as k,A as B,k as P}from"./index-CRhFVGpA.js";const O=()=>{const b=C(),[r,j]=t.useState({oldPassword:"",newPassword:""}),[a,l]=t.useState(!1),[c,u]=t.useState(""),[h,w]=t.useState(""),[p,d]=t.useState(""),v=()=>{let s=!0;return w(""),d(""),r.oldPassword||(w("Old password is required"),s=!1),r.newPassword?r.newPassword.length<6&&(d("New password must be at least 6 characters"),s=!1):(d("New password is required"),s=!1),s},y=async s=>{var o,n;if(s.preventDefault(),u(""),!!v())try{l(!0);const i=await E.post("http://44.196.64.110:5050/api/admin/changeAdminPass",r);P.success("✅ Password Reset Successfully!"),b("/login")}catch(i){const x=((n=(o=i.response)==null?void 0:o.data)==null?void 0:n.message)||"❌ Failed to reset password.";u(x),P.error(x)}finally{l(!1)}},f=s=>{const{name:o,value:n}=s.target;j(i=>({...i,[o]:n}))};return e.jsxs(T,{maxWidth:!1,disableGutters:!0,sx:{width:"100%",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",bgcolor:"#f4f6f9"},children:[e.jsx(k,{position:"top-right",toastOptions:{duration:2e3}}),e.jsxs(S,{component:"form",onSubmit:y,sx:{display:"flex",flexDirection:"column",gap:2,width:"100%",maxWidth:420,bgcolor:"white",p:4,borderRadius:3,boxShadow:4},children:[e.jsx(g,{variant:"h4",align:"center",sx:{fontWeight:"bold",color:"#333",mb:2},children:"Reset Password"}),c&&e.jsx(B,{severity:"error",children:c}),e.jsx(m,{fullWidth:!0,label:"Old Password",name:"oldPassword",variant:"outlined",type:"password",value:r.oldPassword,onChange:f,error:!!h,helperText:h,disabled:a}),e.jsx(m,{fullWidth:!0,label:"New Password",name:"newPassword",variant:"outlined",type:"password",value:r.newPassword,onChange:f,error:!!p,helperText:p,disabled:a}),e.jsx(D,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:2,backgroundColor:"#1976d2",color:"white",fontWeight:"bold","&:hover":{backgroundColor:"#1565c0"}},disabled:a,children:a?e.jsx(W,{size:24,color:"inherit"}):"Reset Password"}),e.jsx(g,{align:"center",sx:{mt:2},children:e.jsx("a",{href:"/login",style:{textDecoration:"none",color:"#1976d2",fontWeight:"bold"},children:"Back to Login"})})]})]})};export{O as default};
